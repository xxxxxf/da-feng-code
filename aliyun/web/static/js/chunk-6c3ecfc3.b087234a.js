(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c3ecfc3","chunk-a0a1401a"],{"22b0":function(e,t,a){},"39a6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"comment"},[a("div",{staticClass:"comment-header"},[e._v(" 评论列表 ")]),e.comment&&e.comment.length>0?a("ul",{staticClass:"comment-box"},e._l(e.comment,(function(t){return a("li",{key:t.id,staticClass:"comment-item"},[a("div",{staticClass:"comment-avatar"},[a("Avatar",{staticStyle:{"background-color":"#2d8cf0"},attrs:{size:"small",icon:"ios-person"}})],1),a("div",{staticClass:"comment-info"},[a("h1",{staticClass:"comment-username"},[e._v(e._s(t.nickname))]),a("p",{staticClass:"comment-content"},[e._v(" "+e._s(t.content)+" ")]),t.reply&&t.reply.length>0?a("div",{staticClass:"comment-reply"},[a("ul",{staticClass:"comment-box"},e._l(t.reply,(function(t){return a("li",{key:t.id,staticClass:"comment-item"},[a("div",{staticClass:"comment-avatar"},[a("Avatar",{staticStyle:{"background-color":"#2d8cf0"},attrs:{size:"small",icon:"ios-chatbubbles"}})],1),a("div",{staticClass:"comment-info"},[a("h1",{staticClass:"comment-username"},[e._v("来自「"+e._s(t.nickname)+"」的回复 "+e._s(t.reply_username))]),a("p",{staticClass:"comment-content"},[e._v(" "+e._s(t.content)+" ")])])])})),0)]):e._e(),a("p",{staticClass:"comment-reply-btn",on:{click:function(a){return e.reply(t.id,t.nickname)}}},[e._v("点击回复")])])])})),0):e._e(),e.page&&e.page.current_page<e.page.total_pages?a("ul",{staticClass:"load-more-comment",on:{click:e.loadMoreComment}},[a("Icon",{staticStyle:{color:"#f00"},attrs:{type:"md-ionic"}}),e._v(" 点击加载更多 ")],1):e._e(),a("Modal",{attrs:{"z-index":e.zIndex,title:e.replyNickname},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-comment-create",{attrs:{comment_type:e.commentType,comment_id:e.comment_id},on:{updateComment:e.updateComment}})],1)],1)},r=[],c=(a("99af"),a("a9e3"),a("2909")),m=(a("96cf"),a("1da1")),s=a("5530"),o=a("2f62"),i=a("d2b3"),l={props:{target_id:{type:Number||String,default:function(){return-1}},target_type:{type:String,default:function(){return"article"}}},components:{VCommentCreate:i["default"]},computed:Object(s["a"])({},Object(o["d"])({comment:function(e){return e.comment.commentList},page:function(e){return e.comment.commentPage}})),data:function(){return{show:!1,comment_id:0,replyNickname:"",zIndex:9999,replyArr:[],commentType:"reply",currentPage:2}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])({getCommentList:"comment/getCommentList"})),{},{reply:function(e,t){this.comment_id=e,this.replyNickname="回复 「".concat(t,"」："),this.show=!this.show},updateComment:function(e,t){this.show=!this.show,this.$emit("updateComment",e,t)},loadMoreComment:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.page||e.page.current_page===e.page.total_pages){t.next=7;break}return t.next=3,e.getCommentList({target_id:e.target_id,target_type:e.target_type,page:e.currentPage});case 3:a=t.sent,n=[].concat(Object(c["a"])(e.comment),Object(c["a"])(a.data.data.data)),e.$store.commit("comment/SET_COMMENT_LIST",n),e.$store.commit("comment/SET_COMMENT_PAGE",a.data.data.meta);case 7:case"end":return t.stop()}}),t)})))()}})},u=l,p=(a("81bd"),a("2877")),d=Object(p["a"])(u,n,r,!1,null,"5f0ac5e4",null);t["default"]=d.exports},"455e":function(e,t,a){"use strict";var n=a("6c4a"),r=a.n(n);r.a},"6c4a":function(e,t,a){},"81bd":function(e,t,a){"use strict";var n=a("22b0"),r=a.n(n);r.a},d2b3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"comment-create"},[a("Form",{ref:"params",attrs:{model:e.params,rules:e.ruleValidate,"label-position":"left","label-width":80}},[a("FormItem",{attrs:{label:"昵称",prop:"nickname"}},[a("Input",{attrs:{placeholder:"请输入您的昵称"},model:{value:e.params.nickname,callback:function(t){e.$set(e.params,"nickname",t)},expression:"params.nickname"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入您的邮箱（不会被公开）"},model:{value:e.params.email,callback:function(t){e.$set(e.params,"email",t)},expression:"params.email"}})],1),a("FormItem",{attrs:{label:"评论",prop:"content"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入您的评论内容..."},model:{value:e.params.content,callback:function(t){e.$set(e.params,"content",t)},expression:"params.content"}})],1),a("FormItem",[a("Button",{on:{click:function(t){return e.resetCommentInput("params")}}},[e._v("清空")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.submit("params")}}},[e._v(" "+e._s("comment"===e.comment_type?"评论":"回复")+" ")])],1)],1)],1)},r=[],c=(a("a9e3"),a("96cf"),a("1da1")),m=a("5530"),s=a("2f62"),o={props:{target_id:{type:Number,default:function(){return 0}},target_type:{type:String,default:function(){return"article"}},comment_type:{type:String,default:function(){return"comment"}},comment_id:{type:Number,default:function(){return 0}}},data:function(){return{params:{nickname:"",email:"",content:""},ruleValidate:{nickname:[{required:!0,message:"请输入您的昵称",trigger:"blur"}],email:[{required:!0,message:"请输入您的邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],content:[{required:!0,message:"请输入评论",trigger:"blur"},{type:"string",min:2,message:"评论不能少于2个字",trigger:"blur"}]}}},methods:Object(m["a"])(Object(m["a"])({},Object(s["b"])({createComment:"comment/createComment",createReply:"reply/createReply"})),{},{submit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=27;break}if(e.prev=1,"comment"!==t.comment_type){e.next=12;break}return t.params.target_id=t.target_id,t.params.target_type=t.target_type,e.next=7,t.createComment(t.params);case 7:n=e.sent,t.$emit("updateComment",n.data.data,"comment"),t.$Message.success("评论成功！"),e.next=19;break;case 12:if("reply"!==t.comment_type){e.next=19;break}return t.params.comment_id=t.comment_id,e.next=16,t.createReply(t.params);case 16:r=e.sent,t.$emit("updateComment",r.data.data,"reply"),t.$Message.success("回复成功！");case 19:t.resetCommentInput("params"),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](1),console.log(e.t0);case 25:e.next=28;break;case 27:t.$Message.error("表单验证失败!");case 28:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}())},resetCommentInput:function(e){this.$refs[e].resetFields()}})},i=o,l=(a("455e"),a("2877")),u=Object(l["a"])(i,n,r,!1,null,"0eb1752d",null);t["default"]=u.exports}}]);